<!DOCTYPE html>


<html theme="dark" showBanner="true" hasBanner="false" > 
<link href="/fontawesome/css/fontawesome.css" rel="stylesheet">
<link href="/fontawesome/css/brands.css" rel="stylesheet">
<link href="/fontawesome/css/solid.css" rel="stylesheet">
<script src="/js/color.global.min.js" ></script>
<script src="/js/load-settings.js" ></script>
<head>
  <meta charset="utf-8">
  
  
  <title>09_高速缓冲存储器（Cache） | Charlie&#39;s Blog</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <meta name="description" content="1.Cache的基本思路 Cache存放主存的“副本” 解决内存墙  2.Cache的工作流程 2.1 是否命中判断 CPU通过位置对主存中的内容进行寻址，不关心存储在其中的内容 Cache通过标记（tags） 来标识其内容在主存中的对应位置  2.2 平均访问时间  hit的情况要远远多于miss的情况 不考虑数据回传时间  2.3 cache访存过程 3.Cache设计要素3.1 容量扩大ca">
<meta property="og:type" content="article">
<meta property="og:title" content="09_高速缓冲存储器（Cache）">
<meta property="og:url" content="http://example.com/2023/01/28/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BB%84%E7%BB%87%E4%B8%8E%E7%BB%93%E6%9E%84/09_%E9%AB%98%E9%80%9F%E7%BC%93%E5%86%B2%E5%AD%98%E5%82%A8%E5%99%A8%EF%BC%88Cache%EF%BC%89/index.html">
<meta property="og:site_name" content="Charlie&#39;s Blog">
<meta property="og:description" content="1.Cache的基本思路 Cache存放主存的“副本” 解决内存墙  2.Cache的工作流程 2.1 是否命中判断 CPU通过位置对主存中的内容进行寻址，不关心存储在其中的内容 Cache通过标记（tags） 来标识其内容在主存中的对应位置  2.2 平均访问时间  hit的情况要远远多于miss的情况 不考虑数据回传时间  2.3 cache访存过程 3.Cache设计要素3.1 容量扩大ca">
<meta property="og:locale">
<meta property="og:image" content="https://chillcharlie-img.oss-cn-hangzhou.aliyuncs.com/imgae/2023/01/30/75f4ce2335d68f77c1a16c28ea2458a4_49_coa22_%E7%AC%AC9%E8%AE%B2.pdf_%E5%92%8C%E5%8F%A6%E5%A4%96_4_%E4%B8%AA%E9%A1%B5%E9%9D%A2_-_%E4%B8%AA%E4%BA%BA_-_Microsoft%E2%80%8B_Edge.png">
<meta property="og:image" content="https://chillcharlie-img.oss-cn-hangzhou.aliyuncs.com/imgae/2023/01/30/27712c3415ed48dfe2a922524c0e1736_4a_coa22_%E7%AC%AC9%E8%AE%B2.pdf_%E5%92%8C%E5%8F%A6%E5%A4%96_4_%E4%B8%AA%E9%A1%B5%E9%9D%A2_-_%E4%B8%AA%E4%BA%BA_-_Microsoft%E2%80%8B_Edge.png">
<meta property="og:image" content="https://chillcharlie-img.oss-cn-hangzhou.aliyuncs.com/imgae/2023/01/30/3ad27bad2d1a52721bca99303e86df26_4b_coa22_%E7%AC%AC9%E8%AE%B2.pdf_%E5%92%8C%E5%8F%A6%E5%A4%96_4_%E4%B8%AA%E9%A1%B5%E9%9D%A2_-_%E4%B8%AA%E4%BA%BA_-_Microsoft%E2%80%8B_Edge.png">
<meta property="og:image" content="https://chillcharlie-img.oss-cn-hangzhou.aliyuncs.com/imgae/2023/01/30/20a9fed2441f766b430adcb1bb4c90d3_20a9fed2441f766b430adcb1bb4c90d3_capture-2023-01-30-15-23-02.jpeg">
<meta property="og:image" content="https://chillcharlie-img.oss-cn-hangzhou.aliyuncs.com/imgae/2023/01/30/4f2956541956c64c3a829bde396f99b9_4c_coa22_%E7%AC%AC9%E8%AE%B2.pdf_%E5%92%8C%E5%8F%A6%E5%A4%96_4_%E4%B8%AA%E9%A1%B5%E9%9D%A2_-_%E4%B8%AA%E4%BA%BA_-_Microsoft%E2%80%8B_Edge.png">
<meta property="og:image" content="https://chillcharlie-img.oss-cn-hangzhou.aliyuncs.com/imgae/2023/01/30/eac06d1d89d2d24f1d3dadf5a613f8f2_4e_coa22_%E7%AC%AC9%E8%AE%B2.pdf_%E5%92%8C%E5%8F%A6%E5%A4%96_4_%E4%B8%AA%E9%A1%B5%E9%9D%A2_-_%E4%B8%AA%E4%BA%BA_-_Microsoft%E2%80%8B_Edge.png">
<meta property="og:image" content="https://chillcharlie-img.oss-cn-hangzhou.aliyuncs.com/imgae/2023/01/30/72d6e220f663fb124bebdde90d1aa5aa_capture-2023-01-30-15-49-44.jpg">
<meta property="og:image" content="https://chillcharlie-img.oss-cn-hangzhou.aliyuncs.com/imgae/2023/01/30/f37b5607c9be01a6386016b9919aa730_4f_coa22_%E7%AC%AC9%E8%AE%B2.pdf_%E5%92%8C%E5%8F%A6%E5%A4%96_4_%E4%B8%AA%E9%A1%B5%E9%9D%A2_-_%E4%B8%AA%E4%BA%BA_-_Microsoft%E2%80%8B_Edge.png">
<meta property="og:image" content="https://chillcharlie-img.oss-cn-hangzhou.aliyuncs.com/imgae/2023/01/30/abe1750361fd0b516dc4fff6c59a6dc3_4d_coa22_%E7%AC%AC9%E8%AE%B2.pdf_%E5%92%8C%E5%8F%A6%E5%A4%96_4_%E4%B8%AA%E9%A1%B5%E9%9D%A2_-_%E4%B8%AA%E4%BA%BA_-_Microsoft%E2%80%8B_Edge.png">
<meta property="og:image" content="https://chillcharlie-img.oss-cn-hangzhou.aliyuncs.com/imgae/2023/01/30/cc116d97518818902f99364e684336a6_51_coa22_%E7%AC%AC9%E8%AE%B2.pdf_%E5%92%8C%E5%8F%A6%E5%A4%96_4_%E4%B8%AA%E9%A1%B5%E9%9D%A2_-_%E4%B8%AA%E4%BA%BA_-_Microsoft%E2%80%8B_Edge.png">
<meta property="og:image" content="https://chillcharlie-img.oss-cn-hangzhou.aliyuncs.com/imgae/2023/01/30/4897c15ee4cc8756d49afc7956f21ca1_capture-2023-01-30-16-25-09.jpg">
<meta property="og:image" content="https://chillcharlie-img.oss-cn-hangzhou.aliyuncs.com/imgae/2023/01/30/98fc4046b9d8719f6b4b2afcb6a83033_52_coa22_%E7%AC%AC9%E8%AE%B2.pdf_%E5%92%8C%E5%8F%A6%E5%A4%96_4_%E4%B8%AA%E9%A1%B5%E9%9D%A2_-_%E4%B8%AA%E4%BA%BA_-_Microsoft%E2%80%8B_Edge.png">
<meta property="og:image" content="https://chillcharlie-img.oss-cn-hangzhou.aliyuncs.com/imgae/2023/01/30/0cddf04115a1bb5dd3f4c655bbdfb6da_53_coa22_%E7%AC%AC9%E8%AE%B2.pdf_%E5%92%8C%E5%8F%A6%E5%A4%96_4_%E4%B8%AA%E9%A1%B5%E9%9D%A2_-_%E4%B8%AA%E4%BA%BA_-_Microsoft%E2%80%8B_Edge.png">
<meta property="og:image" content="https://chillcharlie-img.oss-cn-hangzhou.aliyuncs.com/imgae/2023/01/30/bb4508c0ae6564c231471c67bfb15a7b_54_coa22_%E7%AC%AC9%E8%AE%B2.pdf_%E5%92%8C%E5%8F%A6%E5%A4%96_4_%E4%B8%AA%E9%A1%B5%E9%9D%A2_-_%E4%B8%AA%E4%BA%BA_-_Microsoft%E2%80%8B_Edge.png">
<meta property="og:image" content="https://chillcharlie-img.oss-cn-hangzhou.aliyuncs.com/imgae/2023/01/30/f3b3c6fac508b93fc1aef7e0d5d7b275_55_coa22_%E7%AC%AC9%E8%AE%B2.pdf_%E5%92%8C%E5%8F%A6%E5%A4%96_4_%E4%B8%AA%E9%A1%B5%E9%9D%A2_-_%E4%B8%AA%E4%BA%BA_-_Microsoft%E2%80%8B_Edge.png">
<meta property="og:image" content="https://chillcharlie-img.oss-cn-hangzhou.aliyuncs.com/imgae/2023/01/30/7a57b1333112050c402d89ad689bc113_56_coa22_%E7%AC%AC9%E8%AE%B2.pdf_%E5%92%8C%E5%8F%A6%E5%A4%96_4_%E4%B8%AA%E9%A1%B5%E9%9D%A2_-_%E4%B8%AA%E4%BA%BA_-_Microsoft%E2%80%8B_Edge.png">
<meta property="og:image" content="https://chillcharlie-img.oss-cn-hangzhou.aliyuncs.com/imgae/2023/01/30/103bb6b93c409bc87b3e8dc24b052e82_57_coa22_%E7%AC%AC9%E8%AE%B2.pdf_%E5%92%8C%E5%8F%A6%E5%A4%96_4_%E4%B8%AA%E9%A1%B5%E9%9D%A2_-_%E4%B8%AA%E4%BA%BA_-_Microsoft%E2%80%8B_Edge.png">
<meta property="og:image" content="https://chillcharlie-img.oss-cn-hangzhou.aliyuncs.com/imgae/2023/01/30/981cc93bdd84acadcb0ed4bd730b0436_58_coa22_%E7%AC%AC9%E8%AE%B2.pdf_%E5%92%8C%E5%8F%A6%E5%A4%96_4_%E4%B8%AA%E9%A1%B5%E9%9D%A2_-_%E4%B8%AA%E4%BA%BA_-_Microsoft%E2%80%8B_Edge.png">
<meta property="og:image" content="https://chillcharlie-img.oss-cn-hangzhou.aliyuncs.com/imgae/2023/01/30/09af25ea8612f5e082133b10c6320199_59_coa22_%E7%AC%AC9%E8%AE%B2.pdf_%E5%92%8C%E5%8F%A6%E5%A4%96_4_%E4%B8%AA%E9%A1%B5%E9%9D%A2_-_%E4%B8%AA%E4%BA%BA_-_Microsoft%E2%80%8B_Edge.png">
<meta property="article:published_time" content="2023-01-28T09:03:00.000Z">
<meta property="article:modified_time" content="2023-07-11T12:46:13.950Z">
<meta property="article:author" content="charlie">
<meta property="article:tag" content="2022Fall_计算机组织与结构 课程">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://chillcharlie-img.oss-cn-hangzhou.aliyuncs.com/imgae/2023/01/30/75f4ce2335d68f77c1a16c28ea2458a4_49_coa22_%E7%AC%AC9%E8%AE%B2.pdf_%E5%92%8C%E5%8F%A6%E5%A4%96_4_%E4%B8%AA%E9%A1%B5%E9%9D%A2_-_%E4%B8%AA%E4%BA%BA_-_Microsoft%E2%80%8B_Edge.png">
  
    <link rel="alternate" href="/atom.xml" title="Charlie's Blog" type="application/atom+xml">
  
  
    <link rel="icon" media="(prefers-color-scheme: light)" href="/images/favicon-light-32.png" sizes="32x32">
    <link rel="icon" media="(prefers-color-scheme: light)" href="/images/favicon-light-128.png" sizes="128x128">
    <link rel="icon" media="(prefers-color-scheme: light)" href="/images/favicon-light-180.png" sizes="180x180">
    <link rel="icon" media="(prefers-color-scheme: light)" href="/images/favicon-light-192.png" sizes="192x192">
    <link rel="icon" media="(prefers-color-scheme: dark)" href="/images/favicon-dark-32.png" sizes="32x32">
    <link rel="icon" media="(prefers-color-scheme: dark)" href="/images/favicon-dark-128.png" sizes="128x128">
    <link rel="icon" media="(prefers-color-scheme: dark)" href="/images/favicon-dark-180.png" sizes="180x180">
    <link rel="icon" media="(prefers-color-scheme: dark)" href="/images/favicon-dark-192.png" sizes="192x192">
  
  
    
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/typeface-source-code-pro@0.0.71/index.min.css">

  
  
<link rel="stylesheet" href="/css/style.css">

  
<meta name="generator" content="Hexo 6.3.0"></head>

<body>
  
   
  <div id="main-grid" class="shadow   ">
    <div id="nav" class=""  >
      <navbar id="navbar">
  <nav id="title-nav">
    <a href="/">
      <div id="vivia-logo">
        <div class="dot"></div>
        <div class="dot"></div>
        <div class="dot"></div>
        <div class="dot"></div>
      </div>
      <div>Charlie's Blog </div>
    </a>
  </nav>
  <nav id="main-nav">
    
      <a class="main-nav-link" href="/">Home</a>
    
      <a class="main-nav-link" href="/archives">Archives</a>
    
      <a class="main-nav-link" href="/about">About</a>
    
  </nav>
  <nav id="sub-nav">
    <a id="theme-btn" class="nav-icon">
      <span class="material-symbols-rounded light-mode-icon">wb_sunny</span>
      <span class="material-symbols-rounded dark-mode-icon">dark_mode</span>
    </a>
    
      <a id="nav-rss-link" class="nav-icon mobile-hide" href="/atom.xml" title="RSS 订阅">
        <span class="material-symbols-rounded rss">rss_feed</span>
      </a>
    
    <a id="nav-search-btn" class="nav-icon" title="搜索" style="display: none;">
      <span class="material-symbols-rounded">search</span>
    </a>
    <div id="nav-menu-btn" class="nav-icon">
      <span class="material-symbols-rounded">menu</span>
    </div>
  </nav>
</navbar>
<div id="nav-dropdown" class="hidden">
  <div id="dropdown-link-list">
    
      <a class="nav-dropdown-link" href="/">Home</a>
    
      <a class="nav-dropdown-link" href="/archives">Archives</a>
    
      <a class="nav-dropdown-link" href="/about">About</a>
    
    
      <a class="nav-dropdown-link" href="/atom.xml" title="RSS 订阅">RSS</a>
     
    </div>
</div>
<script>
  let dropdownBtn = document.getElementById("nav-menu-btn");
  let dropdownEle = document.getElementById("nav-dropdown");
  dropdownBtn.onclick = function() {
    dropdownEle.classList.toggle("hidden");
  }
</script>
    </div>
    <div id="sidebar-wrapper">
      <sidebar id="sidebar">
  
    <div class="widget-wrap">
  <div class="info-card">
    <div class="avatar">
      
      <div class="img-dim"></div>
    </div>
    <div class="info">
      <div class="username">Your Name </div>
      <div class="dot"></div>
      <div class="subtitle">This is the subtitle </div>
      <div class="link-list">
        
          <a class="link-btn" target="_blank" rel="noopener" href="https://twitter.com" title="Twitter"><i class="fa-brands fa-twitter"></i></a>
        
          <a class="link-btn" target="_blank" rel="noopener" href="https://store.steampowered.com" title="Steam"><i class="fa-brands fa-steam"></i></a>
        
          <a class="link-btn" target="_blank" rel="noopener" href="https://github.com" title="GitHub"><i class="fa-brands fa-github"></i></a>
         
      </div>  
    </div>
  </div>
</div>

  
  <div class="sticky">
    
      


  <div class="widget-wrap">
    <div class="widget">
      <h3 class="widget-title">分类</h3>
      <div class="category-box">
            <a class="category-link" href="/categories/2022Fall-%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BB%84%E7%BB%87%E4%B8%8E%E7%BB%93%E6%9E%84/">
                2022Fall_计算机组织与结构
                <div class="category-count">17</div>
            </a>
        </div>
    </div>
  </div>


    
      
  <div class="widget-wrap">
    <div class="widget">
      <h3 class="widget-title">标签</h3>
      <ul class="widget-tag-list" itemprop="keywords"><li class="widget-tag-list-item"><a class="widget-tag-list-link" href="/tags/2022Fall-%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BB%84%E7%BB%87%E4%B8%8E%E7%BB%93%E6%9E%84-%E8%AF%BE%E7%A8%8B/" rel="tag">2022Fall_计算机组织与结构 课程</a></li></ul>
    </div>
  </div>


    
      
  <div class="widget-wrap">
    <div class="widget">
      <h3 class="widget-title">归档</h3>
      
      
        <a class="archive-link" href="/archives/2023/07 ">
          July 2023 
          <div class="archive-count">3 </div>
        </a>
      
        <a class="archive-link" href="/archives/2023/02 ">
          February 2023 
          <div class="archive-count">5 </div>
        </a>
      
        <a class="archive-link" href="/archives/2023/01 ">
          January 2023 
          <div class="archive-count">10 </div>
        </a>
      
    </div>
  </div>


    
      
  <div class="widget-wrap">
    <div class="widget">
      <h3 class="widget-title">最新文章</h3>
      <ul>
        
          <li>
            <a href="/2023/07/11/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BB%84%E7%BB%87%E4%B8%8E%E7%BB%93%E6%9E%84/17_%E8%BE%93%E5%85%A5%E8%BE%93%E5%87%BA/">17_输入输出</a>
          </li>
        
          <li>
            <a href="/2023/07/11/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BB%84%E7%BB%87%E4%B8%8E%E7%BB%93%E6%9E%84/12_%E8%99%9A%E6%8B%9F%E5%AD%98%E5%82%A8%E5%99%A8/">12_虚拟存储器</a>
          </li>
        
          <li>
            <a href="/2023/07/11/hello-world/">Hello World</a>
          </li>
        
          <li>
            <a href="/2023/02/24/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BB%84%E7%BB%87%E4%B8%8E%E7%BB%93%E6%9E%84/16_%E6%80%BB%E7%BA%BF/">16_总线</a>
          </li>
        
          <li>
            <a href="/2023/02/06/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BB%84%E7%BB%87%E4%B8%8E%E7%BB%93%E6%9E%84/15_%E6%8E%A7%E5%88%B6%E5%99%A8/">15_控制器</a>
          </li>
        
      </ul>
    </div>
  </div>

    
  </div>
</sidebar>
    </div>
    <div id="content-body">
       

<article id="post-计算机组织与结构/09_高速缓冲存储器（Cache）" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  
    
   
  <div class="article-inner">
    <div class="article-main">
      <header class="article-header">
        
<div class="main-title-bar">
  <div class="main-title-dot"></div>
  
    
      <h1 class="p-name article-title" itemprop="headline name">
        09_高速缓冲存储器（Cache）
      </h1>
    
  
</div>

        <div class='meta-info-bar'>
          <div class="meta-info">
  <time class="dt-published" datetime="2023-01-28T09:03:00.000Z" itemprop="datePublished">2023-01-28</time>
</div>
          <div class="need-seperator meta-info">
            <div class="meta-cate-flex">
  
  <a class="meta-cate-link" href="/categories/2022Fall-%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BB%84%E7%BB%87%E4%B8%8E%E7%BB%93%E6%9E%84/">2022Fall_计算机组织与结构</a>
   
</div>
  
          </div>
          <div class="wordcount need-seperator meta-info">
            1.3k 词 
          </div>
        </div>
        
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/2022Fall-%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BB%84%E7%BB%87%E4%B8%8E%E7%BB%93%E6%9E%84-%E8%AF%BE%E7%A8%8B/" rel="tag">2022Fall_计算机组织与结构 课程</a></li></ul>

      </header>
      <div class="e-content article-entry" itemprop="articleBody">
        
          <h1 id="1-Cache的基本思路"><a href="#1-Cache的基本思路" class="headerlink" title="1.Cache的基本思路"></a>1.Cache的基本思路</h1><ul>
<li>Cache存放主存的“副本”</li>
<li>解决内存墙<br><img src="https://chillcharlie-img.oss-cn-hangzhou.aliyuncs.com/imgae/2023/01/30/75f4ce2335d68f77c1a16c28ea2458a4_49_coa22_%E7%AC%AC9%E8%AE%B2.pdf_%E5%92%8C%E5%8F%A6%E5%A4%96_4_%E4%B8%AA%E9%A1%B5%E9%9D%A2_-_%E4%B8%AA%E4%BA%BA_-_Microsoft%E2%80%8B_Edge.png" alt="49_coa22_第9讲.pdf_和另外_4_个页面_-_个人_-_Microsoft​_Edge.png"></li>
</ul>
<h1 id="2-Cache的工作流程"><a href="#2-Cache的工作流程" class="headerlink" title="2.Cache的工作流程"></a>2.Cache的工作流程</h1><p><img src="https://chillcharlie-img.oss-cn-hangzhou.aliyuncs.com/imgae/2023/01/30/27712c3415ed48dfe2a922524c0e1736_4a_coa22_%E7%AC%AC9%E8%AE%B2.pdf_%E5%92%8C%E5%8F%A6%E5%A4%96_4_%E4%B8%AA%E9%A1%B5%E9%9D%A2_-_%E4%B8%AA%E4%BA%BA_-_Microsoft%E2%80%8B_Edge.png" alt="4a_coa22_第9讲.pdf_和另外_4_个页面_-_个人_-_Microsoft​_Edge.png"></p>
<h2 id="2-1-是否命中判断"><a href="#2-1-是否命中判断" class="headerlink" title="2.1 是否命中判断"></a>2.1 是否命中判断</h2><ul>
<li>CPU通过<strong>位置</strong>对主存中的内容进行寻址，不关心存储在其中的内容</li>
<li>Cache通过<strong>标记（tags）</strong> 来标识其内容在主存中的对应<strong>位置</strong></li>
</ul>
<h2 id="2-2-平均访问时间"><a href="#2-2-平均访问时间" class="headerlink" title="2.2 平均访问时间"></a>2.2 平均访问时间</h2><p><img src="https://chillcharlie-img.oss-cn-hangzhou.aliyuncs.com/imgae/2023/01/30/3ad27bad2d1a52721bca99303e86df26_4b_coa22_%E7%AC%AC9%E8%AE%B2.pdf_%E5%92%8C%E5%8F%A6%E5%A4%96_4_%E4%B8%AA%E9%A1%B5%E9%9D%A2_-_%E4%B8%AA%E4%BA%BA_-_Microsoft%E2%80%8B_Edge.png" alt="4b_coa22_第9讲.pdf_和另外_4_个页面_-_个人_-_Microsoft​_Edge.png"></p>
<ul>
<li>hit的情况要远远多于miss的情况</li>
<li>不考虑数据回传时间</li>
</ul>
<h2 id="2-3-cache访存过程"><a href="#2-3-cache访存过程" class="headerlink" title="2.3 cache访存过程"></a>2.3 cache访存过程</h2><p><img src="https://chillcharlie-img.oss-cn-hangzhou.aliyuncs.com/imgae/2023/01/30/20a9fed2441f766b430adcb1bb4c90d3_20a9fed2441f766b430adcb1bb4c90d3_capture-2023-01-30-15-23-02.jpeg" alt="capture-2023-01-30-15-23-02.jpg"></p>
<h1 id="3-Cache设计要素"><a href="#3-Cache设计要素" class="headerlink" title="3.Cache设计要素"></a>3.Cache设计要素</h1><h2 id="3-1-容量"><a href="#3-1-容量" class="headerlink" title="3.1 容量"></a>3.1 容量</h2><p>扩大cache容量带来的结果：</p>
<ul>
<li>增大了命中率$p$</li>
<li>增加了cache的开销和访问时间$T_c$</li>
</ul>
<h2 id="3-2-映射策略"><a href="#3-2-映射策略" class="headerlink" title="3.2 映射策略"></a>3.2 映射策略</h2><ul>
<li>cache中的行数据:主存块数据+tag</li>
<li>tag!&#x3D;address，但可表示地址</li>
<li>tag是额外信息，tag位数越少，可表示cache行越多</li>
<li>1块!&#x3D;内存中的1个字</li>
<li>访存：<strong>主存地址&#x3D;块号+块内地址</strong><br><img src="https://chillcharlie-img.oss-cn-hangzhou.aliyuncs.com/imgae/2023/01/30/4f2956541956c64c3a829bde396f99b9_4c_coa22_%E7%AC%AC9%E8%AE%B2.pdf_%E5%92%8C%E5%8F%A6%E5%A4%96_4_%E4%B8%AA%E9%A1%B5%E9%9D%A2_-_%E4%B8%AA%E4%BA%BA_-_Microsoft%E2%80%8B_Edge.png" alt="4c_coa22_第9讲.pdf_和另外_4_个页面_-_个人_-_Microsoft​_Edge.png"></li>
</ul>
<h3 id="3-2-1-直接映射"><a href="#3-2-1-直接映射" class="headerlink" title="3.2.1 直接映射"></a>3.2.1 直接映射</h3><ul>
<li>直接映射：把主存的每一块直接映射到cache的<strong>固定可用行</strong><ul>
<li>主存地址被分为三个字段：tag+cache行号+块内地址</li>
<li><img src="https://chillcharlie-img.oss-cn-hangzhou.aliyuncs.com/imgae/2023/01/30/eac06d1d89d2d24f1d3dadf5a613f8f2_4e_coa22_%E7%AC%AC9%E8%AE%B2.pdf_%E5%92%8C%E5%8F%A6%E5%A4%96_4_%E4%B8%AA%E9%A1%B5%E9%9D%A2_-_%E4%B8%AA%E4%BA%BA_-_Microsoft%E2%80%8B_Edge.png" alt="4e_coa22_第9讲.pdf_和另外_4_个页面_-_个人_-_Microsoft​_Edge.png"></li>
</ul>
</li>
</ul>
<p><img src="https://chillcharlie-img.oss-cn-hangzhou.aliyuncs.com/imgae/2023/01/30/72d6e220f663fb124bebdde90d1aa5aa_capture-2023-01-30-15-49-44.jpg" alt="capture-2023-01-30-15-49-44.jpg"></p>
<ul>
<li><p>cache行号 &#x3D; 主存块号 mod cache行数</p>
<ul>
<li>假设cache有$2^c$行，主存有$2^m$块。cache行号就是m位主存块号的低c位</li>
<li>对应关系为<strong>多对一</strong></li>
</ul>
</li>
<li><p>标记tag：地址中的高n位</p>
<ul>
<li>$n&#x3D;m-c$</li>
<li>同一块中的字地址高位都相同</li>
</ul>
</li>
<li><p>优点</p>
<ul>
<li>简单</li>
<li>快速映射</li>
<li>快速检查</li>
</ul>
</li>
<li><p>缺点</p>
<ul>
<li>抖动现象（Thrashing）：如果一个程序重复访问两个需要映射到 同一行中且来自不同块的字，则这两个块不断地被交换到cache中， cache的命中率将会降低</li>
</ul>
</li>
<li><p>适合大容量cache</p>
</li>
</ul>
<h2 id="3-2-2-全关联映射"><a href="#3-2-2-全关联映射" class="headerlink" title="3.2.2 全关联映射"></a>3.2.2 全关联映射</h2><ul>
<li>关联映射：一个主存块可以装入cache的任意一行<ul>
<li><img src="https://chillcharlie-img.oss-cn-hangzhou.aliyuncs.com/imgae/2023/01/30/f37b5607c9be01a6386016b9919aa730_4f_coa22_%E7%AC%AC9%E8%AE%B2.pdf_%E5%92%8C%E5%8F%A6%E5%A4%96_4_%E4%B8%AA%E9%A1%B5%E9%9D%A2_-_%E4%B8%AA%E4%BA%BA_-_Microsoft%E2%80%8B_Edge.png" alt="4f_coa22_第9讲.pdf_和另外_4_个页面_-_个人_-_Microsoft​_Edge.png"></li>
</ul>
</li>
</ul>
<p><img src="https://chillcharlie-img.oss-cn-hangzhou.aliyuncs.com/imgae/2023/01/30/abe1750361fd0b516dc4fff6c59a6dc3_4d_coa22_%E7%AC%AC9%E8%AE%B2.pdf_%E5%92%8C%E5%8F%A6%E5%A4%96_4_%E4%B8%AA%E9%A1%B5%E9%9D%A2_-_%E4%B8%AA%E4%BA%BA_-_Microsoft%E2%80%8B_Edge.png" alt="4d_coa22_第9讲.pdf_和另外_4_个页面_-_个人_-_Microsoft​_Edge.png"></p>
<ul>
<li>标记tag:地址中最高m位<ul>
<li>tag为<strong>块号</strong></li>
<li>每行标记直接记录改行来自哪个块</li>
</ul>
</li>
<li>优点<ul>
<li>避免抖动</li>
</ul>
</li>
<li>缺点<ul>
<li>复杂</li>
<li>Cache搜索代价很大，即在检查的时候需要去访问cache的每一行</li>
</ul>
</li>
<li>适合小容量cache</li>
</ul>
<h3 id="3-2-3-组关联映射"><a href="#3-2-3-组关联映射" class="headerlink" title="3.2.3 组关联映射"></a>3.2.3 组关联映射</h3><ul>
<li><p>组关联映射：Cache分为若干组，每一组包含相同数量的行，每个主存块被映射到固定组的任意一行</p>
<ul>
<li><img src="https://chillcharlie-img.oss-cn-hangzhou.aliyuncs.com/imgae/2023/01/30/cc116d97518818902f99364e684336a6_51_coa22_%E7%AC%AC9%E8%AE%B2.pdf_%E5%92%8C%E5%8F%A6%E5%A4%96_4_%E4%B8%AA%E9%A1%B5%E9%9D%A2_-_%E4%B8%AA%E4%BA%BA_-_Microsoft%E2%80%8B_Edge.png" alt="51_coa22_第9讲.pdf_和另外_4_个页面_-_个人_-_Microsoft​_Edge.png"></li>
</ul>
</li>
<li><p>假设s为cache组号，j为主存块号，S为组数，C为cache行数</p>
<ul>
<li>s&#x3D; j mod S</li>
<li>K路组关联映射：K&#x3D;C&#x2F;S</li>
</ul>
</li>
</ul>
<p><img src="https://chillcharlie-img.oss-cn-hangzhou.aliyuncs.com/imgae/2023/01/30/4897c15ee4cc8756d49afc7956f21ca1_capture-2023-01-30-16-25-09.jpg" alt="capture-2023-01-30-16-25-09.jpg"></p>
<ul>
<li>标记tag：地址最高$n&#x3D;los_2 M - log_2 S$位</li>
</ul>
<h3 id="3-2-4-三种映射方式比较"><a href="#3-2-4-三种映射方式比较" class="headerlink" title="3.2.4 三种映射方式比较"></a>3.2.4 三种映射方式比较</h3><ul>
<li>如果 𝐾 &#x3D; 1，组关联映射等同于直接映射</li>
<li>如果 𝐾 &#x3D; 𝐶，组关联映射等同于关联映射</li>
</ul>
<p>关联度：<br><img src="https://chillcharlie-img.oss-cn-hangzhou.aliyuncs.com/imgae/2023/01/30/98fc4046b9d8719f6b4b2afcb6a83033_52_coa22_%E7%AC%AC9%E8%AE%B2.pdf_%E5%92%8C%E5%8F%A6%E5%A4%96_4_%E4%B8%AA%E9%A1%B5%E9%9D%A2_-_%E4%B8%AA%E4%BA%BA_-_Microsoft%E2%80%8B_Edge.png" alt="52_coa22_第9讲.pdf_和另外_4_个页面_-_个人_-_Microsoft​_Edge.png"></p>
<h2 id="3-3-替换算法"><a href="#3-3-替换算法" class="headerlink" title="3.3 替换算法"></a>3.3 替换算法</h2><ul>
<li>一旦cache行被占用，当新的数据块装入cache中时，原先存放的数据块将会被替换掉</li>
<li>对于直接映射，每个数据块都只有唯一对应的行可以放置，没有选择的机会</li>
<li>替换算法通过硬件来实现</li>
</ul>
<h3 id="3-3-1-最近最少使用算法（LRU）"><a href="#3-3-1-最近最少使用算法（LRU）" class="headerlink" title="3.3.1 最近最少使用算法（LRU）"></a>3.3.1 最近最少使用算法（LRU）</h3><p><img src="https://chillcharlie-img.oss-cn-hangzhou.aliyuncs.com/imgae/2023/01/30/0cddf04115a1bb5dd3f4c655bbdfb6da_53_coa22_%E7%AC%AC9%E8%AE%B2.pdf_%E5%92%8C%E5%8F%A6%E5%A4%96_4_%E4%B8%AA%E9%A1%B5%E9%9D%A2_-_%E4%B8%AA%E4%BA%BA_-_Microsoft%E2%80%8B_Edge.png" alt="53_coa22_第9讲.pdf_和另外_4_个页面_-_个人_-_Microsoft​_Edge.png"></p>
<h3 id="3-3-2-先进先出算法（FIFO）"><a href="#3-3-2-先进先出算法（FIFO）" class="headerlink" title="3.3.2 先进先出算法（FIFO）"></a>3.3.2 先进先出算法（FIFO）</h3><p><img src="https://chillcharlie-img.oss-cn-hangzhou.aliyuncs.com/imgae/2023/01/30/bb4508c0ae6564c231471c67bfb15a7b_54_coa22_%E7%AC%AC9%E8%AE%B2.pdf_%E5%92%8C%E5%8F%A6%E5%A4%96_4_%E4%B8%AA%E9%A1%B5%E9%9D%A2_-_%E4%B8%AA%E4%BA%BA_-_Microsoft%E2%80%8B_Edge.png" alt="54_coa22_第9讲.pdf_和另外_4_个页面_-_个人_-_Microsoft​_Edge.png"></p>
<h3 id="3-3-3-最不经常使用算法（LFU）"><a href="#3-3-3-最不经常使用算法（LFU）" class="headerlink" title="3.3.3 最不经常使用算法（LFU）"></a>3.3.3 最不经常使用算法（LFU）</h3><p><img src="https://chillcharlie-img.oss-cn-hangzhou.aliyuncs.com/imgae/2023/01/30/f3b3c6fac508b93fc1aef7e0d5d7b275_55_coa22_%E7%AC%AC9%E8%AE%B2.pdf_%E5%92%8C%E5%8F%A6%E5%A4%96_4_%E4%B8%AA%E9%A1%B5%E9%9D%A2_-_%E4%B8%AA%E4%BA%BA_-_Microsoft%E2%80%8B_Edge.png" alt="55_coa22_第9讲.pdf_和另外_4_个页面_-_个人_-_Microsoft​_Edge.png"></p>
<h3 id="3-3-4-随机替换算法（Random）"><a href="#3-3-4-随机替换算法（Random）" class="headerlink" title="3.3.4 随机替换算法（Random）"></a>3.3.4 随机替换算法（Random）</h3><p><img src="https://chillcharlie-img.oss-cn-hangzhou.aliyuncs.com/imgae/2023/01/30/7a57b1333112050c402d89ad689bc113_56_coa22_%E7%AC%AC9%E8%AE%B2.pdf_%E5%92%8C%E5%8F%A6%E5%A4%96_4_%E4%B8%AA%E9%A1%B5%E9%9D%A2_-_%E4%B8%AA%E4%BA%BA_-_Microsoft%E2%80%8B_Edge.png" alt="56_coa22_第9讲.pdf_和另外_4_个页面_-_个人_-_Microsoft​_Edge.png"></p>
<h2 id="3-4-写策略"><a href="#3-4-写策略" class="headerlink" title="3.4 写策略"></a>3.4 写策略</h2><ul>
<li>主存和cache的一致性<ul>
<li>当cache中的某个数据块<strong>被替换时</strong>，需要考虑该数据块是否被修改</li>
<li>如果没被修改，则该数据块可以直接被替换掉</li>
<li>如果<strong>被修改</strong>，则在替换掉该数据块之前，必须将修改后的数据块写回到主存中对应位置</li>
</ul>
</li>
</ul>
<h3 id="3-4-1-写回法（write-back）"><a href="#3-4-1-写回法（write-back）" class="headerlink" title="3.4.1 写回法（write back）"></a>3.4.1 写回法（write back）</h3><ul>
<li>利用<font color="#ff0000">脏位(dirty bit)</font>标记块是否被修改</li>
<li>优点<ul>
<li>减少了访问主存的次数</li>
</ul>
</li>
<li>缺点<ul>
<li>部分主存数据可能不是最新的<ul>
<li>I&#x2F;O模块存取时可能无法获得最新的数据，为解决该问题会使得电路设计更加复杂且有可能带来性能瓶颈</li>
</ul>
</li>
<li>多CPU时存在一致性问题</li>
</ul>
</li>
</ul>
<h3 id="3-4-2-写直达（write-through）"><a href="#3-4-2-写直达（write-through）" class="headerlink" title="3.4.2 写直达（write through）"></a>3.4.2 写直达（write through）</h3><ul>
<li>所有写操作都同时对cache和主存进行</li>
<li>优点<ul>
<li>确保主存中的数据总是和cache中的数据一致，总是最新的</li>
</ul>
</li>
<li>缺点<ul>
<li>产生大量的主存访问，减慢写操作</li>
</ul>
</li>
</ul>
<h2 id="3-5-行大小"><a href="#3-5-行大小" class="headerlink" title="3.5 行大小"></a>3.5 行大小</h2><p>行大小与cache命中率关系较复杂<br><img src="https://chillcharlie-img.oss-cn-hangzhou.aliyuncs.com/imgae/2023/01/30/103bb6b93c409bc87b3e8dc24b052e82_57_coa22_%E7%AC%AC9%E8%AE%B2.pdf_%E5%92%8C%E5%8F%A6%E5%A4%96_4_%E4%B8%AA%E9%A1%B5%E9%9D%A2_-_%E4%B8%AA%E4%BA%BA_-_Microsoft%E2%80%8B_Edge.png" alt="57_coa22_第9讲.pdf_和另外_4_个页面_-_个人_-_Microsoft​_Edge.png"></p>
<h2 id="3-6-Cache数目"><a href="#3-6-Cache数目" class="headerlink" title="3.6 Cache数目"></a>3.6 Cache数目</h2><p><img src="https://chillcharlie-img.oss-cn-hangzhou.aliyuncs.com/imgae/2023/01/30/981cc93bdd84acadcb0ed4bd730b0436_58_coa22_%E7%AC%AC9%E8%AE%B2.pdf_%E5%92%8C%E5%8F%A6%E5%A4%96_4_%E4%B8%AA%E9%A1%B5%E9%9D%A2_-_%E4%B8%AA%E4%BA%BA_-_Microsoft%E2%80%8B_Edge.png" alt="58_coa22_第9讲.pdf_和另外_4_个页面_-_个人_-_Microsoft​_Edge.png"><br><img src="https://chillcharlie-img.oss-cn-hangzhou.aliyuncs.com/imgae/2023/01/30/09af25ea8612f5e082133b10c6320199_59_coa22_%E7%AC%AC9%E8%AE%B2.pdf_%E5%92%8C%E5%8F%A6%E5%A4%96_4_%E4%B8%AA%E9%A1%B5%E9%9D%A2_-_%E4%B8%AA%E4%BA%BA_-_Microsoft%E2%80%8B_Edge.png" alt="59_coa22_第9讲.pdf_和另外_4_个页面_-_个人_-_Microsoft​_Edge.png"></p>

        
      </div>

         
    </div>
    
     
  </div>
  
    
<nav id="article-nav">
  <a class="article-nav-btn left "
    
      href="/2023/01/30/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BB%84%E7%BB%87%E4%B8%8E%E7%BB%93%E6%9E%84/10_%E5%A4%96%E9%83%A8%E5%AD%98%E5%82%A8%E5%99%A8/"
      title="10_外部存储器"
     >
    <i class="fa-solid fa-angle-left"></i>
    <p class="title-text">
      
        10_外部存储器
        
    </p>
  </a>
  <a class="article-nav-btn right "
    
      href="/2023/01/28/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BB%84%E7%BB%87%E4%B8%8E%E7%BB%93%E6%9E%84/08_%E5%86%85%E9%83%A8%E5%AD%98%E5%82%A8%E5%99%A8/"
      title="08_内部存储器"
     >

    <p class="title-text">
      
        08_内部存储器
        
    </p>
    <i class="fa-solid fa-angle-right"></i>
  </a>
</nav>


  
</article>

 
    </div>
    <div id="footer-wrapper">
      <footer id="footer">
  
  <div id="footer-info" class="inner">
    
    &copy; 2023 Your Name<br>
    Powered by <a href="https://hexo.io/" target="_blank">Hexo</a> & Theme <a target="_blank" rel="noopener" href="https://github.com/saicaca/hexo-theme-vivia">Vivia</a>
  </div>
</footer>

    </div>
    <div class="back-to-top-wrapper">
    <button id="back-to-top-btn" class="back-to-top-btn" onclick="topFunction()">
        <span class="material-symbols-rounded">keyboard_arrow_up</span>
    </button>
</div>

<script>
    function topFunction() {
        window.scroll({ top: 0, behavior: 'smooth' });
    }
    let btn = document.getElementById('back-to-top-btn');
    function scrollFunction() {
        if (document.body.scrollTop > 600 || document.documentElement.scrollTop > 600) {
            btn.style.opacity = 1;
        } else {
            btn.style.opacity = 0;
        }
    }
    window.onscroll = function() {
        scrollFunction();
    }
</script>

  </div>
  <script src="/js/light-dark-switch.js"></script>
</body>
</html>
